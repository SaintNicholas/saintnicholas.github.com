
<h1 class="sectionedit1"><a name="background" id="background">Background</a></h1>
<div class="level1">

<p>

I wanted to run a webserver from a computer running Ubuntu Server at my house, and I wanted to use nickgoote.com to access the webserver.  I registered nickgoote.com with GoDaddy to get this done.  My end configuration is shown in the picture below.  I&#039;ll refer to this picture in later sections.
</p>

<p>
<a href="/wiki/lib/exe/detail.php?id=server%3Aserver_setup&amp;media=server:serversetup.png" class="media" title="server:serversetup.png"><img src="/wiki/lib/exe/fetch.php?media=server:serversetup.png" class="media" alt="" /></a>
</p>

</div>
<!-- EDIT1 SECTION "Background" [1-354] -->
<h1 class="sectionedit2"><a name="windows_machine_configuration" id="windows_machine_configuration">Windows Machine Configuration</a></h1>
<div class="level1">

<p>

Make the Windows machine have a static IP.  In my case I wanted it to have an IP of 192.168.17.98.
</p>

</div>
<!-- EDIT2 SECTION "Windows Machine Configuration" [355-499] -->
<h1 class="sectionedit3"><a name="ubuntu_server_configuration" id="ubuntu_server_configuration">Ubuntu Server Configuration</a></h1>
<div class="level1">

</div>
<!-- EDIT3 SECTION "Ubuntu Server Configuration" [500-542] -->
<h2 class="sectionedit4"><a name="package_installation" id="package_installation">Package Installation</a></h2>
<div class="level2">

<p>

Then install and start the ssh server with: <br/>


</p>
<pre class="code">sudo apt-get install openssh-server</pre>
<pre class="code">sudo /etc/init.d/ssh start</pre>

<p>
Then install apache2 and php 5 with:

</p>
<pre class="code">sudo apt-get install apache2</pre>
<pre class="code">sudo apt-get install php5</pre>

</div>
<!-- EDIT4 SECTION "Package Installation" [543-840] -->
<h2 class="sectionedit5"><a name="static_ip" id="static_ip">Static IP</a></h2>
<div class="level2">

<p>

Make the Ubuntu Server have a static IP.  In my case I wanted it to have an IP of 192.168.17.99.  Do this by altering the /etc/network/interfaces file.  Modify: <br/>

</p>

<p>
From: <br/>


</p>
<pre class="code"># The primary network interface
auto eth0
iface eth0 inet dhcp</pre>

<p>
To: <br/>


</p>
<pre class="code"># The primary network interface
auto eth0
iface eth0 inet static
    address 192.168.17.99
    netmask 255.255.255.0
    network 192.168.17.0
    broadcast 192.168.17.255
    gateway 192.168.17.1</pre>

<p>
Then restart the adapter with: <br/>


</p>
<pre class="code">sudo /etc/init.d/networking restart</pre>

</div>
<!-- EDIT5 SECTION "Static IP" [841-1421] -->
<h2 class="sectionedit6"><a name="dokuwiki_install" id="dokuwiki_install">DokuWiki Install</a></h2>
<div class="level2">

<p>

Then install DokuWiki into the webroot.  The webroot by default is at /var/www.  An example of how to do this is below.

</p>
<pre class="code">cd /var/www
Open terminal
sudo wget http://www.splitbrain.org/_media/projects/dokuwiki/dokuwiki-2009-12-25c.tgz
sudo tar xvf dokuwiki-2009-12-25c.tgz
sudo mv dokuwiki-2009-12-25 wiki
sudo chown -R www-data:www-data /var/www/wiki
Go to http://localhost/dokuwiki/install.php in browser and follow directions
sudo /etc/init.d/apache2 restart to restart apache2</pre>

<p>
The chown command is based on the DokuWiki Ubuntu installation instructions.  It changes ownership of the /var/www/wiki files to the www-data user and www-data group.  It does not change the r/w/x permissions on any of the files.  This is fine for me because I run a local webserver, but is something to note.
</p>

<p>
Some dokuwiki folders should not be able to be accessed from the outside world.  Apache2 defaults to letting anyone read anything.  To change this, modify the /etc/apache2/sites-available/default file.  The change I made to not let anyone external see the data, conf, bin, or inc folders of dokuwiki is shown below.  This is recommended by the DokuWiki site.  This file can be modified in a similar way to deny access to any other folders as well.

</p>
<pre class="code">&lt;LocationMatch &quot;/(data|conf|bin|inc)/&quot;&gt;
Order allow,deny
Deny from all
&lt;/LocationMatch&gt;</pre>

<p>
I don&#039;t like the default DokuWiki page layout.  In var/www/wiki/lib/tpl/default/layout.css I change .logo to float: left and .pagename to float: right to make the name/link of the wiki show up on the left side.  I also don&#039;t like the backlinks option, so I remove it following <a href="http://www.dokuwiki.org/backlinks" class="urlextern" title="http://www.dokuwiki.org/backlinks"  rel="nofollow">the DokuWiki description of how to</a>, except I remove the link instead of modifying it because I don&#039;t want it appearing at all.
</p>

</div>
<!-- EDIT6 SECTION "DokuWiki Install" [1422-3251] -->
<h2 class="sectionedit7"><a name="port_forwarding" id="port_forwarding">Port Forwarding</a></h2>
<div class="level2">

<p>

I forward port 80 (http) and port 22 (ssh) to my Ubuntu server.  Port 80 is required so that the Ubuntu server gets http requests and can respond to them with my website, and port 22 is required so I can ssh into the Ubuntu Server from outside of my home.
</p>

</div>
<!-- EDIT7 SECTION "Port Forwarding" [3252-3537] -->
<h2 class="sectionedit8"><a name="ddclient" id="ddclient">ddclient</a></h2>
<div class="level2">

<p>

I use ddclient to update my ZoneEdit <acronym title="Domain Name System">DNS</acronym> A record.  Setting up ddclient was based on an Ubuntu <a href="https://help.ubuntu.com/community/DynamicDNS#ddclient" class="urlextern" title="https://help.ubuntu.com/community/DynamicDNS#ddclient"  rel="nofollow">Tutorial</a>
</p>

<p>
When installation was complete, my configuration was:

</p>
<pre class="code"># Configuration file for ddclient generated by debconf
#
# /etc/ddclient.conf

# Update every 5 minutes (300 seconds)
daemon=300
pid=/var/run/ddclient.pid

# Don&#039;t use eth0 IP because we&#039;re on a LAN.  Instead use zoneedit&#039;s
# ip checking site
#use=if, if=eth0
use=web, web=dynamic.zoneedit.com/checkip.html, web-skip=&#039;IP Address&#039;

protocol=zoneedit1
ssl=yes
server=dynamic.zoneedit.com
login=xxxxxxxxxx
password=&#039;xxxxxxxxxx&#039;
nickgoote.com</pre>

</div>
<!-- EDIT8 SECTION "ddclient" [3538-4231] -->
<h2 class="sectionedit9"><a name="crashplan" id="crashplan">CrashPlan</a></h2>
<div class="level2">

<p>

<a href="http://example.com" class="urlextern" title="http://example.com"  rel="nofollow">CrashPlan</a> is a backup utility.  I use it in my system to back up my webserver from my Ubuntu Server to my Windows machine.  Crashplan must be <a href="http://www.unixmen.com/linux-tutorials/290-install-crashplan-backup-tool-in-linux-" class="urlextern" title="http://www.unixmen.com/linux-tutorials/290-install-crashplan-backup-tool-in-linux-"  rel="nofollow">installed</a> on the Ubuntu Server and then installed on the Windows machine.
</p>

<p>
The Ubuntu Server CrashPlan is considered a headless installation, and must be configured using the Windows machine <acronym title="Graphical User Interface">GUI</acronym>.  The CrashPlan website describes how to do the <a href="http://support.crashplan.com/doku.php/how_to/%20configure_a_headless_client" class="urlextern" title="http://support.crashplan.com/doku.php/how_to/%20configure_a_headless_client"  rel="nofollow">configuration</a> of the Ubuntu Server CrashPlan installation from the Windows machine.
</p>

</div>
<!-- EDIT9 SECTION "CrashPlan" [4232-4914] -->
<h1 class="sectionedit10"><a name="dns_configuration" id="dns_configuration">DNS Configuration</a></h1>
<div class="level1">

</div>
<!-- EDIT10 SECTION "DNS Configuration" [4915-4947] -->
<h2 class="sectionedit11"><a name="zoneedit" id="zoneedit">ZoneEdit</a></h2>
<div class="level2">

<p>

I used <a href="http://www.ZoneEdit.com" class="urlextern" title="http://www.ZoneEdit.com"  rel="nofollow">www.ZoneEdit.com</a> for my <acronym title="Domain Name System">DNS</acronym> configuration.  It&#039;s free, and is has worked really well so far.  My <acronym title="Domain Name System">DNS</acronym> configuration is shown below.
</p>

<p>
<a href="/wiki/lib/exe/detail.php?id=server%3Aserver_setup&amp;media=server:serverdns.png" class="media" title="server:serverdns.png"><img src="/wiki/lib/exe/fetch.php?w=454&amp;h=416&amp;media=server:serverdns.png" class="media" alt="" width="454" height="416" /></a>
</p>

<p>
The A record points my domain, nickgoote.com, to my current IP address, 68.40.8.204.  This is my Comcast given dynamic IP address, which needs to be updated occasionally.  To update it, I used ddclient from the Ubuntu Server, which I&#039;ll discuss later.
</p>

<p>
The CNAME record for subdomain www makes <a href="http://www.nickgoote.com" class="urlextern" title="http://www.nickgoote.com"  rel="nofollow">www.nickgoote.com</a> direct to the same IP address that nickgoote.com directs to.
</p>

<p>
The CNAME record for subdomain webmail directs webmail.nickgoote.com to the GoDaddy provided email address I have, and accesses it through webmail.  The webmail.secureserver.net I got from the GoDaddy <acronym title="Domain Name System">DNS</acronym> setup that was provided with the domain.
</p>

<p>
The two MX records are for my GoDaddy provided email address.  They control where email goes when someone emails X@nickgoote.com.  The hosts entered I got from the GoDaddy <acronym title="Domain Name System">DNS</acronym> setup that was provided with the domain.
</p>

<p>
The two NS records I&#039;m not 100% sure about.  They appear to add the A, CNAME, and MX records to the ns4.zoneedit.com and ns13.zoneedit.com ZoneEdit nameservers.  The setup requires there to be at least 2 NS records, but any more than 2 costs money.
</p>

</div>
<!-- EDIT11 SECTION "ZoneEdit" [4948-6233] -->
<h2 class="sectionedit12"><a name="godaddy" id="godaddy">GoDaddy</a></h2>
<div class="level2">

<p>

Once ZoneEdit is configured, you need to point GoDaddy to the ZoneEdit nameservers that were specified by the NS records.  This makes requests for nickgoote.com, <a href="http://www.nickgoote.com" class="urlextern" title="http://www.nickgoote.com"  rel="nofollow">www.nickgoote.com</a>, and webmail.nickgoote.com look at the ZoneEdit nameservers.

</p>

</div>
<!-- EDIT12 SECTION "GoDaddy" [6234-] -->